001  LBL A          | 42,21,11 # burn
002  RCL 2          |    45  2
003  STO .9         |    44 .9
004  LBL .5         | 42,21,.5 # burn segment
005  RCL .4         |    45 .4
006  STO .7         |    44 .7
007  RCL .9         |    45 .9
008  TEST 9 (x>=y)  | 43,30, 9 # remaining time larger than interval?
009  GTO .9         |    22 .9
010  RCL .9         |    45 .9
011  STO .7         |    44 .7
012  LBL .9         | 42,21,.9 # calc pos
013  RCL 9          |    45  9
014  STO .3         |    44 .3
015  RCL 8          |    45  8
016  STO .2         |    44 .2
017  ->P            |     43 1
018  STO 4          |    44  4
019  x<>y           |       34
020  STO 5          |    44  5
021  RCL .5         |    45 .5
022  RCL .6         |    45 .6
023  RCL 4          |    45  4
024  /              |       10
025  x^2            |   43  11
026  *              |       20
027  RCL 4          |    45  4
028  /              |       10
029  STO*.2         | 44,20,.2
030  STO*.3         | 44,20,.3
031  F? 1           | 43, 6, 1 # empty?
032  GTO .7         |    22 .7
033  2              |        2
034  0              |        0
035  STO I          |   44  25
036  RCL (i)        |   45  24
037  RCL 1          |    45  1
038  *              |       20
039  RCL .7         |    45 .7
040  *              |       20
041  STO .8         |    44 .8
042  RCL 0          |    45  0
043  PSE            |   42  31 # show remaining fuel
044  TEST 9 (x>=y)  | 43,30, 9 # enough fuel?
045  GTO .8         |    22 .8
046  RCL 0          |    45  0
047  STO .8         |    44 .8
048  RCL (i)        |   45  24
049  /              |       10
050  RCL 1          |    45  1
051  /              |       10
052  STO .7         |    44 .7
053  SF 1           | 43, 4, 1
054  LBL .8         | 42,21,.8 # calculate accelerations
055  RCL .8         |    45 .8
056  STO-0          | 44,30, 0
057  RCL 1          |    45  1
058  2              |        2
059  1              |        1
060  STO I          |   44  25
061  R_down         |       33
062  RCL (i)        |   45  24
063  *              |       20
064  2              |        2
065  2              |        2
066  STO I          |   44  25
067  R_down         |       33
068  RCL (i)        |   45  24
069  RCL 0          |    45  0
070  +              |       40
071  /              |       10
072  ENTER          |       36
073  ENTER          |       36
074  RCL 5          |    45  5
075  RCL 3          |    45  3
076  -              |       30
077  COS            |       24
078  *              |       20
079  STO+.3         | 44,40,.3
080  R_down         |       33
081  RCL 5          |    45  5
082  RCL 3          |    45  3
083  -              |       30
084  SIN            |       23
085  CHS            |       16
086  *              |       20
087  STO+.2         | 44,40,.2
088  LBL .7         | 42,21,.7 # calculate new vectors
089  RCL .0         |    45 .0
090  RCL .7         |    45 .7
091  *              |       20
092  STO+8          | 44,40, 8
093  RCL .1         |    45 .1
094  RCL .7         |    45 .7
095  *              |       20
096  STO+9          | 44,40, 9
097  RCL .2         |    45 .2
098  RCL .7         |    45 .7
099  *              |       20
100  STO+.0         | 44,40,.0
101  RCL .3         |    45 .3
102  RCL .7         |    45 .7
103  *              |       20
104  STO+.1         | 44,40,.1
105  RCL 9          |    45  9
106  RCL 8          |    45  8
107  ->P            |     43 1
108  RCL .6         |    45 .6
109  -              |       30
110  STO 4          |    44  4
111  x<>y           |       34
112  STO 5          |    44  5
113  1              |        1 # XXX
114  8              |        8
115  0              |        0
116  /              |       10
117  PI             |   43  26
118  *              |       20
119  RCL .6         |    45 .6
120  *              |       20
121  1              |        1
122  EEX            |       26
123  3              |        3
124  /              |       10
125  RCL .7         |    45 .7 # decremement remaining time
126  STO-.9         | 44,30,.9
127  RCL .9         |    45 .9
128  PSE            |   42  31 # show burn time left
129  TEST 1 (x>0)   | 43,30, 1 # more time to go?
130  GTO .5         |    22 .5
131  LBL .6         | 42,21,.6 # produce output 
132  PI             |   43  26 # FIXME use 1 reg to save space?
133  1              |        1
134  8              |        8
135  0              |        0
136  /              |       10
137  RCL .6         |    45 .6
138  *              |       20
139  1              |        1
140  EEX            |       26
141  3              |        3
142  /              |       10
143  STO*5          | 44,20, 5
144  RCL .0         |    45 .0
145  RCL 8          |    45  8
146  *              |       20
147  RCL .1         |    45 .1
148  RCL 9          |    45  9
149  *              |       20
150  +              |       40
151  3              |        3
152  .              |       48
153  6              |        6
154  *              |       20
155  STO 6          |    44  6
156  RCL .0         |    45 .0
157  RCL 9          |    45  9
158  *              |       20
159  RCL .1         |    45 .1
160  RCL 8          |    45  8
161  *              |       20
162  -              |       30
163  CHS            |       16 # simplify
164  3              |        3
165  .              |       48
166  6              |        6
167  *              |       20
168  STO 7          |    44  7
169  RCL 9          |    45  9
170  RCL 8          |    45  8
171  ->P            |     43 1
172  STO/6          | 44,10, 6
173  STO/7          | 44,10, 7
174  RCL 7          |    45  7 # vh    # OUTPUT
175  RCL 6          |    45  6 # vv
176  RCL 5          |    45  5 # range
177  RCL 4          |    45  4 # alt
178  RTN            |   43  32
179  LBL .2         | 42,21,.2 # general init
180  CF 1           | 43, 5, 1
181  5              |        5 # XXX 30
182  0              |        0
183  STO 2          |    44  2
184  0              |        0
185  STO 1          |    44  1
186  RTN            |   43  32
187  LBL .3         | 42,21,.3 # setup circular orbit
188  RCL .6         |    45 .6
189  RCL 4          |    45  4
190  +              |       40
191  STO 8          |    44  8
192  0              |        0
193  STO 9          |    44  9
194  STO .0         |    44 .0
195  RCL .5         |    45 .5
196  CHS            |       16
197  RCL 8          |    45  8
198  /              |       10
199  sqrt           |       11
200  RCL .6         |    45 .6
201  *              |       20
202  STO .1         |    44 .1
203  RTN            |   43  32
204  LBL 9          | 42,21, 9 #init moon params
205  GSB .2         |    32 .2
206  1              |        1
207  .              |       48
208  6              |        6
209  2              |        2
210  2              |        2
211  CHS            |       16
212  STO .5         |    44 .5
213  1              |        1
214  7              |        7
215  3              |        3
216  6              |        6
217  EEX            |       26
218  3              |        3
219  STO .6         |    44 .6
220  RTN            |   43  32
221  LBL B          | 42,21,12 # init descent module
222  GSB 9          |    32  9
223  2              |        2
224  2              |        2
225  STO I          |   44  25
226  2              |        2
227  7              |        7
228  6              |        6
229  3              |        3
230  uSTO (i)       | u 44  24
231  2              |        2
232  3              |        3
233  STO I          |   44  25
234  8              |        8
235  8              |        8
236  3              |        3
237  3              |        3
238  uSTO (i)       | u 44  24
239  STO 0          |    44  0
240  2              |        2
241  1              |        1
242  STO I          |   44  25
243  4              |        4
244  3              |        3
245  9              |        9
246  8              |        8
247  8              |        8
248  uSTO (i)       | u 44  24
249  2              |        2
250  0              |        0
251  STO I          |   44  25
252  9              |        9
253  .              |       48
254  7              |        7
255  0              |        0
256  6              |        6
257  6              |        6
258  uSTO (i)       | u 44  24
259  1              |        1
260  5              |        5
261  2              |        2
262  4              |        4
263  0              |        0
264  STO 4          |    44  4
265  GSB .3         |    32 .3
266  RTN            |   43  32
267  LBL C          | 42,21,13 # init ascent module
268  GSB 9          |    32  9
269  2              |        2
270  2              |        2
271  STO I          |   44  25
272  2              |        2
273  1              |        1
274  2              |        2
275  9              |        9
276  uSTO (i)       | u 44  24
277  2              |        2
278  3              |        3
279  STO I          |   44  25
280  2              |        2
281  3              |        3
282  5              |        5
283  6              |        6
284  uSTO (i)       | u 44  24
285  2              |        2
286  1              |        1
287  STO I          |   44  25
288  1              |        1
289  5              |        5
290  5              |        5
291  5              |        5
292  3              |        3
293  uSTO (i)       | u 44  24
294  2              |        2
295  0              |        0
296  STO I          |   44  25
297  4              |        4
298  .              |       48
299  6              |        6
300  2              |        2
301  8              |        8
302  3              |        3
303  uSTO (i)       | u 44  24
304  RTN            |   43  32
